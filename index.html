<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Red Green Word Game</title>
  <meta name="description" content="Red Green Word Game">
  <meta name="author" content="Liam Devaney">
  <link rel="stylesheet" href="css/styles.css?v=25-10-16">
  <link rel="stylesheet" href="css/bootstrap.css?v=25-10-16">
  <link rel="stylesheet" href="css/bootstrap-theme.css?v=25-10-16">
  <script src="scripts/my.js"></script>
  <!--[if lt IE 9]>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.js"></script>
  <![endif]-->
</head>
<body onload="getShuffledListOfWords()">

  <div id="intro-wrap">
  <h1>Is it a Red or Green word?</h1>
    <button type="button" class="btn btn-primary btn-lg" id="start-game" onclick="getNewWord()">Start with 5 words</button>
  </div>

  <div id="game-wrap">
    <h2 id="current-word"></h2>
    <button type="button" class="btn btn-danger btn-lg" id="is_red">Red</button>
    <button type="button" class="btn btn-success btn-lg" id="is_green">Green</button>
  </div>

<script>

function getShuffledListOfWords(){
    // setting up the GET request
    function readTextFile(file, callback) {
        var rawFile = new XMLHttpRequest();
        rawFile.overrideMimeType("application/json");
        rawFile.open("GET", file, true);
        rawFile.onreadystatechange = function() {
            if (rawFile.readyState === 4 && rawFile.status == "200") {
                callback(rawFile.responseText);
            }
        }
        rawFile.send(null);
    };
    
    // use to weakly randimise array
    function randomize(a, b) {
        return Math.random() - 0.5;
    };
    
    // Calling the data
    readTextFile("data/eyfsWords.json", function(text){
        words = JSON.parse(text);
        words.eyfsWords.sort(randomize);
    });//readTextFile

};//getShuffledListOfWords

var correct_answers = 95;
//var word_colour = words.eyfsWords[correct_answers].colour;
//var current_word = words.eyfsWords[correct_answers].word;

function getNewWord(){
    document.getElementById("current-word").innerHTML = "<p class="+ words.eyfsWords[correct_answers].colour + ">" + words.eyfsWords[correct_answers].word + " </p>";
    document.getElementById("intro-wrap").style.display = 'none';
    document.getElementById("game-wrap").style.display = 'block';
    document.getElementById("is_"+words.eyfsWords[correct_answers].colour).className += " correct_answer_btn";
    document.getElementById("is_red").onclick = answer;
    document.getElementById("is_green").onclick = answer;
};

function answer(){
    if (this.classList.contains("correct_answer_btn")) {
        console.log("Correct");
        correct_answers++; //Add 1 to correct answers
        this.classList.remove("correct_answer_btn");
        if (correct_answers == words.eyfsWords.length) {
            console.log("Game over");
            endGame();
        } else{
        console.log("New word");
        getNewWord();
        };
    } else{
        console.log("Incorrect");

    };
}; // function answer()

function endGame(){
    console.log("EndersGame");
    document.getElementById("is_red").style.display = 'none';
    document.getElementById("is_green").style.display = 'none';
    document.getElementById("current-word").innerHTML = "<h1>You did it, can you do it faster?</h1>";
}

//function startTimer (){
//  //Display timer
//};

</script>
</body>
</html> 
